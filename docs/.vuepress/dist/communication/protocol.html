<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Protocol | my blog</title>
    <meta name="description" content="我的个人网站">
    <link rel="icon" href="/logo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.7b3857c8.css" as="style"><link rel="preload" href="/assets/js/app.ed840f28.js" as="script"><link rel="preload" href="/assets/js/2.0b2e57d9.js" as="script"><link rel="preload" href="/assets/js/5.92355dcc.js" as="script"><link rel="prefetch" href="/assets/js/10.eff5c372.js"><link rel="prefetch" href="/assets/js/11.ff9569a9.js"><link rel="prefetch" href="/assets/js/12.e4f64086.js"><link rel="prefetch" href="/assets/js/13.c0150b65.js"><link rel="prefetch" href="/assets/js/14.e0da9eb6.js"><link rel="prefetch" href="/assets/js/15.6229ed58.js"><link rel="prefetch" href="/assets/js/16.2e1a8fe8.js"><link rel="prefetch" href="/assets/js/17.da282b71.js"><link rel="prefetch" href="/assets/js/18.88b3d6a9.js"><link rel="prefetch" href="/assets/js/19.eabf71ac.js"><link rel="prefetch" href="/assets/js/20.448ed747.js"><link rel="prefetch" href="/assets/js/3.6183a137.js"><link rel="prefetch" href="/assets/js/4.1a83c261.js"><link rel="prefetch" href="/assets/js/6.2f52a11e.js"><link rel="prefetch" href="/assets/js/7.e22f8eb5.js"><link rel="prefetch" href="/assets/js/8.c61942c1.js"><link rel="prefetch" href="/assets/js/9.9ed84073.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b3857c8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">my blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">前端基础</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">前端基础</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/basic.html" class="sidebar-link">基本汇总</a></li><li><a href="/js/array.html" class="sidebar-link">Array方法</a></li><li><a href="/js/string.html" class="sidebar-link">String方法</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FE框架</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="protocol"><a href="#protocol" class="header-anchor">#</a> Protocol</h1> <p></p><div class="table-of-contents"><ul><li><a href="#https">https</a></li><li><a href="#http和https区别">http和https区别</a></li><li><a href="#ssl-tls的握手流程，如下（简述）">SSL/TLS的握手流程，如下（简述）</a></li></ul></div><p></p> <h2 id="https"><a href="#https" class="header-anchor">#</a> https</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">HTTP</span>存在的问题
<span class="token constant">HTTP</span> 本身不具备加密的功能<span class="token punctuation">,</span><span class="token constant">HTTP</span> 报文使用明文方式发送
由于互联网是由联通世界各个地方的网络设施组成<span class="token punctuation">,</span>所有发送和接收经过某些设备的数据都可能被截获或窥视

<span class="token function">无法确认你发送到的服务器就是真正的目标服务器</span><span class="token punctuation">(</span>可能服务器是伪装的<span class="token punctuation">)</span>

请求或响应在传输途中，遭攻击者拦截并篡改内容的攻击被称为中间人攻击（Man<span class="token operator">-</span><span class="token keyword">in</span><span class="token operator">-</span>the<span class="token operator">-</span>Middle attack，<span class="token constant">MITM</span>）
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>超文本传输安全协议是一种通过计算机网络进行安全通信的传输协议。<span class="token constant">HTTPS</span>经由<span class="token constant">HTTP</span>进行通信，
但利用<span class="token constant">SSL</span><span class="token operator">/</span><span class="token constant">TLS</span>来加密数据包。<span class="token constant">HTTPS</span>开发的主要目的，是提供对网站服务器的身份认证
</code></pre></div><p><img src="/assets/img/https.5d2f7386.jpg" alt="solar"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">SSL</span>和<span class="token constant">TLS</span>的关系
传输层安全性协议（英语：Transport Layer Security，缩写作 <span class="token constant">TLS</span>），及其前身安全套接层
（Secure Sockets Layer，缩写作 <span class="token constant">SSL</span>）是一种安全协议，目的是为互联网通信，提供安全及数据完整性保障。

<span class="token constant">TLS</span><span class="token operator">/</span><span class="token constant">SSL</span> 协议
<span class="token constant">HTTPS</span> 协议的主要功能基本都依赖于 <span class="token constant">TLS</span><span class="token operator">/</span><span class="token constant">SSL</span> 协议，<span class="token constant">TLS</span><span class="token operator">/</span><span class="token constant">SSL</span> 的功能实现主要依赖于三类基本算法：
散列函数 、对称加密和非对称加密
其利用非对称加密实现身份认证和密钥协商
对称加密算法采用协商的密钥对数据加密
基于散列函数验证信息的完整性


</code></pre></div><p><img src="/assets/img/incrypt.cd64ea05.jpg" alt="solar"></p> <h2 id="http和https区别"><a href="#http和https区别" class="header-anchor">#</a> http和https区别</h2> <div class="language-js extra-class"><pre class="language-js"><code>https就是安全版本的http，譬如一些支付等操作基本都是基于https的，因为http请求的安全系数太低了。

简单来看，https与http的区别就是： 在请求前，会建立ssl链接，确保接下来的通信都是加密的，无法被轻易截取分析
如果要将网站升级成https，需要后端支持（后端需要申请证书等），然后https的开销也比http要大（因为需要额外建立安全链接以及加密等），所以一般来说http2<span class="token punctuation">.</span><span class="token number">0</span>配合https的体验更佳（因为http2<span class="token punctuation">.</span><span class="token number">0</span>更快了
</code></pre></div><h2 id="ssl-tls的握手流程，如下（简述）"><a href="#ssl-tls的握手流程，如下（简述）" class="header-anchor">#</a> SSL/TLS的握手流程，如下（简述）</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span> 浏览器请求建立<span class="token constant">SSL</span>链接，并向服务端发送一个随机数–Client random和客户端支持的加密方法，比如<span class="token constant">RSA</span>加密，此时是明文传输。 
<span class="token number">2.</span> 服务端从中选出一组加密算法与Hash算法，回复一个随机数–Server random，并将自己的身份信息以证书的形式发回给浏览器
（证书里包含了网站地址，非对称加密的公钥，以及证书颁发机构等信息）
<span class="token number">3.</span> 浏览器收到服务端的证书后
    <span class="token operator">-</span> 验证证书的合法性（颁发机构是否合法，证书中包含的网址是否和正在访问的一样），如果证书信任，则浏览器会显示一个小锁头，否则会有提示
    <span class="token operator">-</span> 用户接收证书后（不管信不信任），浏览会生产新的随机数–Premaster secret，然后证书中的公钥以及指定的加密方法加密<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Premaster secret</span><span class="token template-punctuation string">`</span></span>，发送给服务器。
    <span class="token operator">-</span> 利用Client random、Server random和Premaster secret通过一定的算法生成<span class="token constant">HTTP</span>链接数据传输的对称加密key<span class="token operator">-</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">session key</span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">-</span> 使用约定好的<span class="token constant">HASH</span>算法计算握手消息，并使用生成的<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">session key</span><span class="token template-punctuation string">`</span></span>对消息进行加密，最后将之前生成的所有信息发送给服务端。 
<span class="token number">4.</span> 服务端收到浏览器的回复
    <span class="token operator">-</span> 利用已知的加解密方式与自己的私钥进行解密，获取<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Premaster secret</span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">-</span> 和浏览器相同规则生成<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">session key</span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">-</span> 使用<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">session key</span><span class="token template-punctuation string">`</span></span>解密浏览器发来的握手消息，并验证Hash是否与浏览器发来的一致
    <span class="token operator">-</span> 使用<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">session key</span><span class="token template-punctuation string">`</span></span>加密一段握手消息，发送给浏览器
<span class="token number">5.</span> 浏览器解密并计算握手消息的<span class="token constant">HASH</span>，如果与服务端发来的<span class="token constant">HASH</span>一致，此时握手过程结束<span class="token punctuation">.</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ed840f28.js" defer></script><script src="/assets/js/2.0b2e57d9.js" defer></script><script src="/assets/js/5.92355dcc.js" defer></script>
  </body>
</html>
